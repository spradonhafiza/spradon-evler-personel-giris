<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spradon Evleri | Personel Paneli</title>
  <style>
    body{
      background:#2f3e3e;
      font-family:Arial, sans-serif;
      margin:0;
      padding:18px;
      color:#fff;
    }
    .wrap{max-width:720px;margin:0 auto;}
    .card{
      background:#445a5a;
      padding:18px;
      border-radius:12px;
      box-shadow:0 8px 20px rgba(0,0,0,.25);
      margin-bottom:12px;
    }
    h2,h3{margin:0 0 10px 0}
    .muted{opacity:.85;font-size:12px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    input,select,button{
      padding:10px;
      border-radius:10px;
      border:0;
      font-size:14px;
    }
    input,select{flex:1;min-width:160px}
    button{cursor:pointer;font-weight:700}
    .btn{background:#f0d36a;color:#111}
    .btn2{background:#7aa0ff;color:#111}
    .btnRed{background:#ff7a7a;color:#111}
    .btnGray{background:#d0d0d0;color:#111}
    table{width:100%;border-collapse:collapse;margin-top:10px;font-size:13px}
    th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,.12);text-align:left}
    th{opacity:.9}
    .smallBtn{padding:7px 10px;border-radius:10px;font-size:12px}
    .pill{display:inline-block;padding:4px 8px;border-radius:999px;background:rgba(0,0,0,.18);font-size:12px}
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
    a{color:#f0d36a}
  </style>
</head>

<body>
<div class="wrap">

  <div class="card">
    <div class="topbar">
      <div>
        <h2>Spradon Evleri | Personel Paneli</h2>
        <div class="muted" id="who"></div>
      </div>
      <div class="row">
        <button class="btn2" onclick="goSecurity()">GÃ¼venlik Bildirimi</button>
        <button class="btnGray" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>â• Personel Ekle</h3>
    <div class="muted">Yeni personel eklemek iÃ§in ID + Ad Soyad + Birim seÃ§.</div>
    <div class="row" style="margin-top:10px">
      <input id="newId" placeholder="ID (Ã¶rn: 0103)" />
      <input id="newName" placeholder="Ad Soyad (Ã¶rn: YÃ¼ksel Kaya)" />
      <select id="newDept">
        <option value="">Birim seÃ§</option>
        <option>GÃ¼venlik</option>
        <option>Teknik</option>
        <option>Temizlik</option>
        <option>Saha</option>
        <option>Muhasebe</option>
        <option>YÃ¶netim</option>
        <option>DanÄ±ÅŸma</option>
      </select>
      <button class="btn" onclick="addUser()">Ekle</button>
    </div>
    <div class="muted" style="margin-top:8px">
      Åifre demo iÃ§in herkes: <b>1234</b>
    </div>
  </div>

  <div class="card">
    <h3>ğŸ‘¥ Personel Listesi</h3>
    <div class="muted">DÃ¼zenle ile isim/birim gÃ¼ncelleyebilirsin. Sil ile kaydÄ± kaldÄ±rÄ±rsÄ±n.</div>
    <div id="list"></div>
  </div>

  <div class="card">
    <h3>Not</h3>
    <div class="muted">
      â€¢ Bu demo GitHub Pages Ã¼zerinde Ã§alÄ±ÅŸÄ±r.<br>
      â€¢ Åimdilik kayÄ±tlar tarayÄ±cÄ±da Ã§alÄ±ÅŸÄ±r; bir sonraki adÄ±mda localStorage ile kalÄ±cÄ± yaparÄ±z.<br>
      â€¢ â€œResmÃ® Ã§Ä±ktÄ±â€ alÄ±nacaksa AkÄ±n iÃ§in resmÃ® ad: <b>Kamil DurmuÅŸ</b> kullanÄ±lacak ÅŸekilde rapor modÃ¼lÃ¼ ekleriz.
    </div>
  </div>

</div>

<script>
  // ====== Demo KullanÄ±cÄ± Oturumu (GiriÅŸ sayfasÄ± ile baÄŸlanÄ±r) ======
  const LS_CURRENT = "spradon_current_user";

  // ====== Personel Listesi (DEMO) ======
  // Åifre herkes iÃ§in 1234 (pass alanÄ±)
  // AkÄ±n gÃ¶rÃ¼nen ad; resmÃ® Ã§Ä±ktÄ± iÃ§in legalName kullanÄ±lÄ±r.
  let USERS = {
    "0001": { name:"Seda Zeybek", dept:"YÃ¶netim / MÃ¼dÃ¼r", role:"mudur", pass:"1234" },
    "0002": { name:"AkÄ±n Kamil DurmuÅŸ", legalName:"Kamil DurmuÅŸ", dept:"Saha / Gece Sorumlu", role:"saha_admin", pass:"1234" },
    "0003": { name:"Ä°hsan AyÃ§i", dept:"Saha Sorumlusu", role:"saha", pass:"1234" },
    "0004": { name:"Celal Ä°nce", dept:"Saha Sorumlusu", role:"saha", pass:"1234" },

    "0401": { name:"Ece Åenol", dept:"Muhasebe", role:"muhasebe", pass:"1234" },

    "0101": { name:"Serkan Keskin", dept:"GÃ¼venlik", role:"guvenlik", pass:"1234" },
    "0102": { name:"Besna Karaduman", dept:"GÃ¼venlik", role:"guvenlik", pass:"1234" },

    "0201": { name:"Murat Alp", dept:"Teknik Åef", role:"teknik_sef", pass:"1234" },
    "0202": { name:"Selman", dept:"Teknik", role:"teknik", pass:"1234" },

    "0301": { name:"YÃ¼ksel", dept:"Temizlik Åefi", role:"temizlik_sef", pass:"1234" },
    "0302": { name:"Timur Kul", dept:"Temizlik", role:"temizlik", pass:"1234" }
  };

  // ====== YardÄ±mcÄ±lar ======
  function currentUser(){
    const raw = localStorage.getItem(LS_CURRENT);
    return raw ? JSON.parse(raw) : null;
  }

  function roleByDept(dept){
    if(dept === "YÃ¶netim") return "mudur";
    if(dept === "Muhasebe") return "muhasebe";
    if(dept === "Saha") return "saha";
    if(dept === "GÃ¼venlik") return "guvenlik";
    if(dept === "Teknik") return "teknik";
    if(dept === "Temizlik") return "temizlik";
    if(dept === "DanÄ±ÅŸma") return "danisma";
    return "personel";
  }

  function renderHeader(){
    const u = currentUser();
    if(u){
      document.getElementById("who").innerHTML =
        <span class="pill">GiriÅŸ yapan: <b>${u.name}</b></span> <span class="pill">${u.dept || ""}</span>;
    } else {
      document.getElementById("who").innerHTML =
        <span class="pill">Demo mod: giriÅŸ kaydÄ± bulunamadÄ±</span>;
    }
  }

  function renderList(){
    const ids = Object.keys(USERS).sort();
    let html = `
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Ad Soyad</th>
            <th>Birim / GÃ¶rev</th>
            <th>Ä°ÅŸlem</th>
          </tr>
        </thead>
        <tbody>
    `;

    for(const id of ids){
      const p = USERS[id];
      html += `
        <tr>
          <td><b>${id}</b></td>
          <td>${p.name}</td>
          <td>${p.dept}</td>
          <td>
            <button class="smallBtn btn2" onclick="editUser('${id}')">DÃ¼zenle</button>
            <button class="smallBtn btnRed" onclick="deleteUser('${id}')">Sil</button>
          </td>
        </tr>
      `;
    }

    html += </tbody></table>;
    document.getElementById("list").innerHTML = html;
  }

  // ====== Personel Ekle ======
  function addUser(){
    const id = document.getElementById("newId").value.trim();
    const name = document.getElementById("newName").value.trim();
    const dept = document.getElementById("newDept").value;

    if(!id || !name || !dept){
      alert("ID + Ad Soyad + Birim seÃ§ilmeli.");
      return;
    }
    if(USERS[id]){
      alert("Bu ID zaten var. BaÅŸka ID seÃ§.");
      return;
    }

    USERS[id] = {
      name,
      dept,
      role: roleByDept(dept),
      pass: "1234"
    };

    document.getElementById("newId").value = "";
    document.getElementById("newName").value = "";
    document.getElementById("newDept").value = "";

    renderList();
    alert("Eklendi âœ…");
  }

  // ====== Personel DÃ¼zenle ======
  function editUser(id){
    const p = USERS[id];

    const yeniIsim = prompt("Ad Soyad:", p.name);
    if(yeniIsim !== null && yeniIsim.trim() !== ""){
      p.name = yeniIsim.trim();
    }

    const yeniDept = prompt("Birim / GÃ¶rev:", p.dept);
    if(yeniDept !== null && yeniDept.trim() !== ""){
      p.dept = yeniDept.trim();
      // Dept deÄŸiÅŸince rolÃ¼ de yeniden ata (basit kural)
      // (Ä°stersen rolÃ¼ ayrÄ±ca sorarÄ±z)
      const basicDept = (p.dept.split("/")[0] || "").trim();
      p.role = roleByDept(basicDept) || p.role;
    }

    renderList();
    alert("GÃ¼ncellendi âœ…");
  }

  // ====== Personel Sil ======
  function deleteUser(id){
    if(!confirm(id + " silinsin mi?")) return;
    delete USERS[id];
    renderList();
    alert("Silindi âœ…");
  }

  // ====== GÃ¼venlik sayfasÄ± ======
  function goSecurity(){
    window.location.href = "security.html";
  }

  // ====== Ã‡Ä±kÄ±ÅŸ ======
  function logout(){
    localStorage.removeItem(LS_CURRENT);
    window.location.href = "index.html";
  }

  // Ä°lk yÃ¼kleme
  renderHeader();
  renderList();
</script>
</body>
</html>
