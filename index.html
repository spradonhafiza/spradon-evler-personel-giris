<script>
  // --- Varsayılan kullanıcılar (demo) ---
  const DEFAULT_USERS = {
    "0001": { name: "Seda Zeybek", dept: "Yönetim", role: "mudur" },
    "0002": { name: "Akın Kamil Durmuş", dept: "Saha", role: "saha" },
    "0003": { name: "İhsan Ayçi", dept: "Saha", role: "saha" },
    "0004": { name: "Celal İnce", dept: "Saha", role: "saha" },

    "0101": { name: "Serkan Keskin", dept: "Güvenlik", role: "guvenlik" },
    "0102": { name: "Besna Karaduman", dept: "Güvenlik", role: "guvenlik" },

    "0201": { name: "Murat Alp", dept: "Teknik", role: "teknik_sef" },
    "0202": { name: "Selman", dept: "Teknik", role: "teknik" },

    "0301": { name: "Yüksel", dept: "Temizlik", role: "temizlik_sef" },
    "0302": { name: "Timur", dept: "Temizlik", role: "temizlik" },

    "0401": { name: "Ece Şenol", dept: "Muhasebe", role: "muhasebe" }
  };

  const LS_USERS = "spradon_users";
  const LS_CURRENT = "spradon_current_user";

  function loadUsers(){
    const stored = localStorage.getItem(LS_USERS);
    if(stored){
      try { return JSON.parse(stored); } catch(e){}
    }
    return DEFAULT_USERS;
  }

  function saveUsers(users){
    localStorage.setItem(LS_USERS, JSON.stringify(users));
  }

  // İlk açılışta localStorage yoksa varsayılanları yaz
  (function init(){
    if(!localStorage.getItem(LS_USERS)){
      saveUsers(DEFAULT_USERS);
    }
  })();

  // Giriş fonksiyonu (butondaki onclick bunu çağırmalı)
  function login(){
    const id = document.getElementById("pid").value.trim();
    const pw = document.getElementById("pass").value.trim();

    if(pw !== "1234"){
      alert("Şifre hatalı!");
      return;
    }

    const users = loadUsers();
    if(!users[id]){
      alert("Personel ID bulunamadı!");
      return;
    }

    localStorage.setItem(LS_CURRENT, JSON.stringify({ id, ...users[id] }));
    // Panel sayfasına yönlendir
    window.location.href = "panel.html";
  }
</script>
