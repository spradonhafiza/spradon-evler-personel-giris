<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Tespit Bildirimi</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#f4f6f8;padding:20px}
.card{max-width:700px;margin:auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.1)}
h1{text-align:center}
label{display:block;margin-top:12px;font-weight:bold}
input,select,textarea,button{
  width:100%;padding:10px;margin-top:6px;
  border:1px solid #ccc;border-radius:6px;font-size:14px
}
button{background:#0d6efd;color:#fff;border:none;margin-top:18px}
button:hover{background:#084298}
.ok{color:green;margin-top:10px}
.err{color:red;margin-top:10px}
</style>
</head>

<body>
<div class="card">
<h1>ğŸ“ Tespit Bildirimi</h1>

<form id="tespitForm">

<label>Birim</label>
<select name="birim" required>
  <option value="">SeÃ§iniz</option>
  <option>GÃ¼venlik</option>
  <option>Teknik</option>
  <option>Temizlik</option>
  <option>Peyzaj</option>
</select>

<label>Tespit TÃ¼rÃ¼</label>
<select name="durum" required>
  <option value="">SeÃ§iniz</option>
  <option>YapÄ±ldÄ±</option>
  <option>Ertelendi</option>
  <option>ParÃ§a bekleniyor</option>
  <option>Malzeme eksik</option>
  <option>DÄ±ÅŸ servis Ã§aÄŸrÄ±lacak</option>
  <option>DÄ±ÅŸ servis Ã§aÄŸrÄ±ldÄ±</option>
  <option>Teklif bekleniyor</option>
</select>

<label>AÃ§Ä±klama</label>
<textarea name="aciklama" rows="4" required></textarea>

<label>FotoÄŸraf</label>
<input type="file" name="foto" accept="image/*" required>

<button type="submit">GÃ¶nder</button>

<div id="sonuc"></div>
</form>
</div>

<script>
const FORM_URL = "https://script.google.com/macros/s/AKfycby0A6mQvJEK9VadLhAhUoiIk2xmDTsVIYT7zbulE7ZKXe24fwnA1bohLuKebV6c1ixulw/exec";

document.getElementById("tespitForm").addEventListener("submit", async e => {
  e.preventDefault();
  const sonuc = document.getElementById("sonuc");
  sonuc.innerHTML = "â³ GÃ¶nderiliyor...";

  const form = e.target;
  const file = form.foto.files[0];
  const reader = new FileReader();

  reader.onload = async () => {
    const payload = {
      birim: form.birim.value,
      durum: form.durum.value,
      aciklama: form.aciklama.value,
      fotoBase64: reader.result
    };

    try{
      const r = await fetch(FORM_URL,{
        method:"POST",
        body:JSON.stringify(payload)
      });
      const j = await r.json();
      sonuc.innerHTML = j.ok ? "âœ… Tespit kaydedildi" : "âŒ Hata oluÅŸtu";
      if(j.ok) form.reset();
    }catch(err){
      sonuc.innerHTML = "âŒ BaÄŸlantÄ± hatasÄ±";
    }
  };
  reader.readAsDataURL(file);
});
</script>
</body>
</html>
